\chapter[quantitative-rules]{量化规则}

\startdictum
概率论，不过是生活约化而成的计算。
  
\rightaligned{Laplace，1819}
\stopdictum

\indentation 问题已被形式化了，这是我们所作的公设在数学上的必然结果。这些公设可粗略描述如下：

\startitemize[R]
\item 命题的可信性由实数表示；
\item 定性符合常识；
\item 一致性。
\stopitemize

\noindent 本章仅基于这些公设推导与推断相关的量化规则。所得结果，曾经有着一段漫长、复杂又令人难以置信的历史。这段历史充满着广义科学方法论方面的教训（见某些章尾部的评注部分）。

\section{乘法规则}

我们首先为逻辑乘 $AB$ 的可信性分别与 $A$ 与 $B$ 的可信性之间的关系找出一个一致性的规则。我们在意的其实是 $AB|C$。由于推理过程本身有些微妙，这需要我们从一些不同的视角去审视。

先考虑将 $AB$ 为真的裁决打碎为对 $A$ 与 $B$ 所作的更为基本的裁决。机器人可以

\startitemize[n]
\item 裁决 $B$ 为真；\hfill $(B|C)$
\item 认可 $B$ 为真，裁决 $A$ 为真。\hfill $(A|BC)$
\stopitemize

\noindent 或者，等同地，

\startitemize[n]
\item 裁决 $A$ 为真；\hfill $(A|C)$
\item 认可 $A$ 为真，裁决 $B$ 为真。\hfill $(B|AC)$
\stopitemize

\noindent 上面，在每种情况中，我们给出了每一步骤相应的可信性。

现在，解释一下第 1 个过程。为了命题 $AB$ 为真，$B$ 必须为真。因而，必须考虑 $B|C$ 的可信性。此外，若 $B$ 为真，则需要进一步保证 $A$ 为真，因此还需要考虑 $A|BC$ 的可信性。但是若 $B$ 为假，则无需裁决 $A$，亦即无需裁决 $A|\itbar{B}C$，便可知晓 $AB$ 为假；若机器人先推理 $B$，那么，$A$ 的可信性仅在 $B$ 为真时才值得考虑。因此，机器人在有了 $B|C$ 与 $A|BC$ 的情况下，就不需要 $A|C$ 了，因为 $A|C$ 并未给它能带来更多的信息。

类似地，$A|B$ 与 $B|A$ 是不需要的；无论 $A$ 与 $B$ 在缺乏 $C$ 的情况下多么可信，都与机器人在知道 $C$ 为真的情况下所作的裁决无关。例如，若机器人知晓地球是圆的，那么在裁决与现在的宇宙学相关的问题时，它就可以忽略那些在它尚不知地球是圆的之时需要考虑的观点。

由于逻辑乘法运算遵循交换律，$AB = BA$，因此上文中的 $A$ 与 $B$ 毫无疑问，可以互换；亦即 $A|C$ 与 $B|AC$ 的知识也能用于确定 $AB|C = BA|C$。对于 $AB$，机器人必定能从这两个过程中得到相同的可信性，这是我们的一致性条件之一，即公设 (\convertnumber{R}{3}a)。

可以用更明确的形式来描述。$(AB|C)$ 可以是 $B|C$ 与 $A|BC$ 的某个函数：

\placeformula[basic-function]
\startformula
(AB|C) = F[(B|C), (A|BC)]
\stopformula

现在，如果上述推理尚不完全清晰，那么就审视一下其他的替代形式。例如，可以假设

\placeformula
\startformula
(AB|C) = F[(A|C), (B|C)]
\stopformula

是容许的形式。但是，很容易揭示，这种形式的关系无法满足公设 (\convertnumber{R}{2}) 的那些定性条件。给定 C，命题 $A$ 或许非常可信，命题 $B$ 或许可信，但是 $AB$ 可能依然非常可信或非常不可信。

例如，下一个遇到的人，蓝眼睛，这相当可信，黑头发，这也相当可信；这两样生理特征同时出现于此人身上，也没什么不合理之处。不过，左眼睛是蓝色的，这相当可信，右眼睛是褐色的，也相当可信，但是若它们同时为真，那就极为不可信。如果使用这种形式的公式，那么就没法考虑这些情况。用这种形式的函数，我们的机器人无法像人类那样去作推理，它甚至连定性的推理都做不到。

还有一些其他的可能的形式。尝试所有的可能形式的方法——\quotation{穷举证明}——可像下面这样进行。先引入一些实数

\placeformula
\startformula
u = (AB|C),\quad v = (A|C),\quad w = (B|AC),\quad x = (B|C),\quad y = (A|BC).
\stopformula

如果 $u$ 被表示成 $u$、$v$、$x$、$y$ 中两个或更多个实数的函数，那么有 11 种可能的形式。可以写出每一种可能，将它置于各种极端条件下，如同褐色眼睛与蓝色眼睛那样（抽象描述：$A$ 蕴含了 $B$ 为假\footnote{译注：$A\Rightarrow\itbar{B}$}）。其他极端条件有，$A = B$，$A = C$，$C\Rightarrow\itbar{A}$，等。Tribus（1969）作了冗长乏味的分析，发现只有两种可能的形式，在某种极端的情况下，遵循着定性符合常识这一公设，它们分别是 $u = F(x, y)$ 与 $u = F(w, v)$，这正是之前我们推理出来的那两种函数形式。

现在，运用第 \in[plausible-reasoning] 章讨论的量化要求。给定的先验信息的任何变化 $C\rightarrow C'$，以及 $B$ 变得更可信，$A$ 没有变化，

\placeformula
\startformula
B|C' > B|C
\stopformula

\placeformula
\startformula
A|BC' = A|BC
\stopformula

根据常识，$AB$ 只会变得更可信，而不是更不可新：

\placeformula
\startformula
AB|C'\ge AB|C
\stopformula

当且仅当 $A|BC$ 为不可能时，相等关系成立。同样，给定先验信息 $C''$，以及

\placeformula
\startformula
B|C'' = B|C
\stopformula

\placeformula
\startformula
A|BC'' > A|BC
\stopformula

就会有

\placeformula
\startformula
AB|C'' \ge AB|C
\stopformula

当且仅当 $B|C$ 为不可能时，相等关系成立（即使此时未去定义 $A|BC$，$AB|C''$ 依然不可能为真）。此外，函数 $F(x, y)$ 必须是连续的，不然，(\in[basic-function]) 右侧的某个可信性的微小递增可能会导致 $AB|C$ 的大幅递增。

总之，$F(x, y)$ 必须是 x 与 y 的连续的单调递增函数。若假设它可微（并非必须如此；见 (\in[function-eq]) 的讨论），便有

\startsubformulas[mono-req]
\placeformula
\startformula
F_1(x, y) \equiv \frac{\partial F}{\partial x} \ge 0
\stopformula

仅当 $x$ 表示不可能时，上式中的相等关系成立；还有，

\placeformula
\startformula
F_2(x, y) \equiv \frac{\partial F}{\partial y} \ge 0
\stopformula
\stopsubformulas


后文会继续使用这些符号，无论 $F$ 是什么样的函数，$F_i$ 表示 $F$ 的第 $i$ 个参数对应的微分。

接下来，我们动用公设 (\convertnumber{R}{3}a)，\quotation{结构上}的一致性。假设想获得 $(ABC|D)$ 的可信性，即三个命题同时为真的可信性，由于布尔运算遵循结合律 $ABC = (AB)C = A(BC)$，因此有两种方式来做此事。若规则具有一致性，一定能从这两种顺序的运算中获得相同的结果。首先，可以将 $BC$ 视为单一的命题，利用 (\in[basic-function])：


\placeformula
\startformula
(ABC|D) = F[(BC|D), (A|BCD)]
\stopformula

然后，对可信性 $(BC|D)$ 应用 (\in[basic-function])，可得：

\startsubformulas[expand-way]
\placeformula[subeq:1]
\startformula
(ABC|D) = F\{F[(C|D), (B|CD)], (A|BCD)\}
\stopformula

不过，也可以在一开始将 $AB$ 视为单一的命题，这样就可以从另一种顺序推出不同的结果：

\placeformula[subeq:2]
\startformula
(ABC|D) = F[(C|D), (AB|CD)] = F\{(C|D), F[(B|CD), (A|BCD)]\}
\stopformula
\stopsubformulas

若我们寻找的这个规则是要用于表示推理的一致性方法，那么 (\in[subeq:1]) 与 (\in[subeq:2]) 必定恒等。在这种情况下，我们的机器人所作的一致性推理，其必要条件可表示为一个函数方程，

\placeformula[function-eq]
\startformula
F[F(x, y), z] = F[x, F(y, z)]
\stopformula

在数学里，这个方程历史悠久，源起于 N. H. Abel (1826) 的研究。Acz\'el (1966) 在他的讲述函数方程的巨著中，贴切地称这个方程为\quotation{关联方程}（Associativity Equation），并列举了 98 份讨论或使用这个方程的参考文献。Acz\'el 在不假设函数可微的条件下，求出了通解 (\in[aczel-general-solution])，见下文。不过，他的书中（Acz\'el, 1987），用了 11 页的篇幅证明此解的存在。在此，我们给出 R. T. Cox (1961) 在假设函数可微的前提下给出的更短的证明；也可参考附录 B 中的讨论。

显然，(\in[function-eq]) 有一个平凡解，$F(x, y) = \text{常数}$。但是这个解违背了单调性要求 (\in[mono-req])，并且毫无用处可言。除非 (\in[function-eq]) 有一个非平凡解，不然，这条路就走不通了；因此，必须寻求最为广义的非平凡解。先定义一些缩写

\placeformula
\startformula
u\equiv F(x, y),\quad v\equiv F(y, z)
\stopformula

现在，依然认为 $(x, y, z)$ 是互不依赖的变量，待求解的函数方程可写为

\placeformula[eq-target]
\startformula
F(x, v) = F(u, z)
\stopformula

分别对 $x$ 与 $y$ 求微分，按照 (\in[mono-req]) 的记法，可得

\placeformula[elim]
\startformula
\startmathalignment
\NC F_1(x, v) \NC = F_1(u, z)F_1(x, y)\NR
\NC F_2(x, v)F_1(y, z) \NC = F_1(u, z)F_2(x, y)\NR
\stopmathalignment
\stopformula

从这两个方程中消除 $F_1(u, z)$，可得

\placeformula[eq-U]
\startformula
G(x, v)F_1(y, z) = G(x, y)
\stopformula

其中，$G(x, y)\equiv F_2(x, y)/F_1(x, y)$。显然，(\in[elim]) 的左部一定是不依赖 $z$。可将 (\in[eq-U]) 等价地写为

\placeformula[eq-V]
\startformula
G(x, v)F_2(y, z) = G(x, y)G(y, z)
\stopformula

用 $U$ 与 $V$ 分别表示 (\in[eq-U]) 与 (\in[eq-V]) 的左部，可以得出 $\partial V/\partial y = \partial U/\partial z$。因而 $G(x, y)G(y, z)$ 必定不依赖 $y$。具有这一性质的最具一般性的函数 $G(x, y)$ 为

\placeformula[general-func]
\startformula
G(x, y) = r\frac{H(x)}{H(y)}
\stopformula

其中，$r$ 为常数，$H(x)$ 为任意函数。基于 $F$ 的单调性，可确定 $G > 0$，因此需要 $r > 0$，至于 $H(x)$ 的正负则无关大体。应用 (\in[general-func])，则 (\in[eq-U]) 与 (\in[eq-V]) 变成：

\placeformula
\startformula
F_1(y, z) = \frac{H(v)}{H(y)} 
\stopformula

\placeformula
\startformula
F_2(y, z) = r\frac{H(v)}{H(z)} 
\stopformula

关系 $dv=dF(y, z)=F_1dy + F_2dz$ 可化为

\placeformula
\startformula
\frac{dv}{H(v)} = \frac{dy}{H(y)} + r\frac{dz}{H(z)}
\stopformula

或者化为积分形式

\placeformula[eq-int]
\startformula
w[F(y, z)] = w(v) = w(y)w'(z)
\stopformula

其中

\placeformula[w-func]
\startformula
w(x) = \text{exp}\left\{\int_{}^{x}\frac{dx}{H(x)}\right\}
\stopformula

积分符号无下界，意味着 $w$ 会有一个任意的倍增因子。但是，将 (\in[eq-target]) 代入函数 $w(\cdot)$ 并应用 (\in[eq-int])，可得 $w(x)w^r(v) = w(u)w^r(z)$；再次应用 (\in[eq-int])，函数方程便可化为

\placeformula[2-25]
\startformula
w(x)w^r(y)[w(z)]^{r^2} = w(x)w^r(y)w^r(z)
\stopformula

若 $r = 1$，便可获得一个非平凡解，最终结果可表示为以下两种形式：

\placeformula
\startformula
w[F(x, y)] = w(x)w(y)
\stopformula

或

\placeformula[aczel-general-solution]
\startformula
F(x, y) = w^{-1}[w(x)w(y)]
\stopformula

因此，逻辑乘法所遵守的结合律与交换律必须体现为以下的函数形式

\placeformula[product-rule]
\startformula
w(AB|C) = w(A|BC)w(B|C) = w(B|AC)w(A|C)
\stopformula

我们将这种形式称为{\bf 乘法规则}。由 (\in[w-func]) 的构造可知，$w(x)$ 必定是个正的连续的单调函数，至于它是递增的还是递减的，这有赖于 $H(x)$ 的符号；目前，它另有深意。

结果得到了 (\in[product-rule])，某种意义上，它是公设 (\convertnumber{R}{3}a) 所述一致性的必要条件。不过，对于任意多个联结的命题，(\in[product-rule]) 显然也能保证这种一致性的存在。例如，用 (\in[expand-way]) 的办法可以将 $(ABCDEFG|H)$ 展开为数目繁多的不同形式；但是，只要 (\in[product-rule]) 成立，这些形式的结果必定相同。

定性要符合常识，这一要求对 $w(x)$ 有着更为严格的限定。例如，根据 (\in[product-rule]) 所给出的形式，假设在给定 $C$ 的情况下 $A$ 为真，那么在由 $C$ 的知识所营造的\quotation{逻辑环境}里，从当且仅当一个为真时另一个也必定为真这一意义来说，命题 $AB$ 与 $B$ 并无区别。基于第 1 节讨论的最基本的公理，同样为真的命题一定具备相同的可信性\footnote{见 1.5 节。}：

\placeformula
\startformula
AB|C = B|C
\stopformula

还有

\placeformula
\startformula
A|BC = A|C
\stopformula

由于给定 $C$ 的时候 $A$ 是确信的（亦即 $C$ 蕴含 $A$），那么给定任何其他不与 $C$ 矛盾的 $B$，$A$ 依然是确信的。在这种情况下，(\in[product-rule]) 约化为

\placeformula
\startformula
w(B|C) = w(A|C)w(B|C)
\stopformula

对于机器人而言，无论 $B$ 有多么可信或不可信，该式必定成立。因此，函数 $w(x)$ 必定具有以下性质

\placeformula
\startformula
w(A|C) = 1\;\text{表示确信性}
\stopformula

现在，在给定 $C$ 的情况下，假设 $A$ 不可信，那么在给定 $C$ 时，命题 $AB$ 也不可信：

\placeformula
\startformula
AB|C = A|C
\stopformula

若给定 $C$ 的情况下，$A$ 不可信（亦即 $C$ 蕴含 $\itbar{A}$），那么给定任何不与 $C$ 矛盾的更充分的信息 $B$，$A$ 依然不可信：

\placeformula
\startformula
A|BC = A|C
\stopformula

在这种情况下，(\in[product-rule]) 可化为

\placeformula[eq-zero]
\startformula
w(A|C) = w(A|C)w(B|C)
\stopformula

无论 $B$ 有多么可信，这个方程必定成立。$w(A|C)$ 只有两个可能的值能够满足这个条件，要么为 $0$，要么为 $+\infty$（排除了 $-\infty$，不然基于连续性，$w(B|C)$ 必须为负值；于是 (\in[eq-zero]) 自相矛盾）。

综上所述，定性要符合常识，这决定了 $w(x)$ 必须是一个正值的连续单调函数。它可能递增，也可能递减。若它递增，取值范围必须从 0 到 1，前者表不可信，后者表确信。若它递减，取值范围必须从 $+\infty$ 到 1，前者表不可信，后者表确信。至于它在这两种区间里具体如何变化，我们所给出的公设则没有对其进行限定。

然而，这两种可能的表示在内涵上并不相同。给定任意函数 $w_1(x)$，令它符合上述标准并且用 $+\infty$ 表示不可信，便可以定义一个新函数 $\displaystyle w_2(x) = \frac{1}{w_1(x)}$，这个函数同样可被接受，它是以 0 来表示不可信。因而，作为一种约定，若我们采纳 $0\le w(x)\le 1$，不失一般性；也就是说，就内涵而言，我们所作的公设里面的所有的一致性皆被包含于这种形式。（读者不妨检验一下，未尝不可选择相反的那种约定，从这一点发展出一套完整的理论，也包括它的全部应用，结果是一样的，只不过方程在形式上有些另类，但内涵是相同的。）

\section{加法规则}

因为现在所考虑的命题为亚里士多德逻辑类型——非真即假，逻辑乘 $A\itbar{A}$ 总是为假，逻辑和 $A + \itbar{A}$ 总是为真。在某些方面，$A$ 为假的可信性一定依赖于它为真的可信性\footnote{译注：$A$ 的可信性依赖于 $\itbar{A}$ 的可信性。}。如果定义 $u\equiv w(A|B)$，$v\equiv w(\itbar{A}|B)$，那么必定存在某种函数关系

\placeformula[2-36]
\startformula
v = S(u)
\stopformula

定性要符合常识。显然，当 $0\le u\le 1$ 时，$S(u)$ 应当是一个连续单调递减函数，其极值 $S(0) = 1$，$S(1) = 0$。不过，具备这些性质的函数未必皆为 $S(u)$，因为 $S(u)$ 必须与 $AB$ 或 $A\itbar{B}$ 的乘法规则

\placeformula[2-37]
\startformula
w(AB|C) = w(A|C)w(B|AC)
\stopformula

\placeformula[2-38]
\startformula
w(A\itbar{B}|C) =  w(A|C)w(\itbar{B}|AC)
\stopalign
\stopformula

保持一致。因而，凭借 (\in[2-36]) 和 (\in[2-38])，可将方程 (\in[2-37]) 变为

\placeformula[2-39]
\startformula
w(AB|C) = w(A|C)S[w(\itbar{B}|AC)] = w(A|C)S\left[\frac{w(A\itbar{B}|C)}{w(A|C)}\right]
\stopformula

我们再用一次交换性：$A$ 和 $B$ 在 $w(AB|C)$ 中是对称的，因此一致性\footnote{译注：祈求 (\Roman{3})}要求

\placeformula[2-40]
\startformula
w(A|C)S\left[\frac{w(A\itbar{B}|C)}{w(A|C)}\right] = w(B|C)S\left[\frac{w(B\itbar{A}|C)}{w(B|C)}\right]
\stopformula

对于所有命题 $A$、$B$、$C$，该式一定成立；特别是，当

\placeformula[2-41]
\startformula
\itbar{B} = AD
\stopformula

时，$D$ 为任何新的命题，此时 (\in[2-40]) 一定成立。不过，如 (\in[1-13]) 所述，有：

\placeformula[2-42]
\startformula
A\itbar{B} = \itbar{B}\quad\quad B\itbar{A} = \itbar{A}
\stopformula

(\in[2-40]) 中的某些项可以写成

\placeformula[2-43]
\startformula
\startmathalignment[n=3]
\NC w(A\itbar{B}|C) \NC = w(\itbar{B}|C) \NC = S[w(B|C)] \NR
\NC w(B\itbar{A}|C) \NC = w(\itbar{A}|C) \NC = S[w(A|C)] \NR
\stopmathalignment
\stopformula

因而，若使用缩写

\placeformula[2-44]
\startformula
x\equiv w(A|C)\,,\quad\quad y\equiv w(B|C)
\stopformula

(\in[2-40])\footnote{译注：原书是 (\in[2-25])，应该有误。} 就变成了函数方程

\placeformula[2-45]
\startformula
xS\left[\frac{S(y)}{x}\right] = yS\left[\frac{S(x)}{y}\right],\quad\quad
\startmathmatrix
\NC 0 \le S(y) \le x \NR
\NC 0 \le x \le 1 \NR
\stopmathmatrix
\stopformula

这个方程表示了 $S(x)$ 为了与乘法规则一致而必须具备的一种比例性质。在 $y = 1$ 这种特殊情况下，这个方程便约化为

\placeformula[2-46]
\startformula
S[S(x)] = x
\stopformula

这表明 $S(x)$ 是一个自反函数；$S(x) = S^{-1}(x)$。因此，从 (\in[2-36]) 可以推出 $u = S(v)$。不过，这不过是表示了一个显而意见的事实，$A$ 与 $\itbar{A}$ 成相反关系；这与哪一个命题是用头戴短横线的字母来表示没有关系。之前，我们在 (\in[1-8]) 已经提到了此事；若之前还不够明显，那么现在必须认识到这一点。

下面探究一下 (\in[2-45]) 中的有效域。命题 $D$ 是随意的，因此通过选择不同的 $D$，便可以得到 $w(D|AC)$ 的所有值

\placeformula[2-47]
\startformula
0 \le w(D|AC) \le 1
\stopformula

但是，$S(y) = w(AD|C) = w(A|C)w(D|AC)$，因此 (\in[2-47]) 正是 (\in[2-45]) 所述的 $(0 \le S(y) \le x)$。$x$ 和 $y$ 在这个域里是对称的；将二者互换，这个域不变。在几何上，这个域由 $xy$ 平面上单位正方形 $(0\le x, y\le 1)$ 内的点组成，并且这些点位于曲线 $y = S(x)$ 的上方。

实际上，基于 (\in[2-45]) 所描述的点对这条曲线的无限逼近，便可以确定该曲线的形状。因为，若设 $y = S(x) + \epsilon$，那么当 $\epsilon \rightarrow 0^{+}$ 时，(\in[2-45]) 中的两边趋向于 $S(1) = 0$，只不过速度不同。因此，一切取决于 $\delta\rightarrow 0$ 的时候 $S(1 - \delta)$ 趋向于 0 的确切途径。为了研究这个，我们通过

\placeformula[2-48]
\startformula
\frac{S(x)}{y} = 1 - \text{exp}\{-q\}
\stopformula

定义了一个新的变量 $q(x, y)$。然后，挑选 $\delta = \text{exp}\{-q\}$，通过

\placeformula[2-49]
\startformula
S(1 - \delta) = S(1 - \text{exp}\{-q\}) = \text{exp}\{-J(q)\}
\stopformula

定义函数 $J(q)$，然后探究 $q\rightarrow\infty$ 时 $J(q)$ 的渐近形式。

现在将 $x$ 和 $q$ 视为独立的变量，由 (\in[2-48]) 可得

\placeformula[2-50]
\startformula
\frac{S(y)}{x} = 1 - \text{exp}\{-(\alpha + q)\} + O(\text{exp}\{-2q\})
\stopformula

其中

\placeformula[2-51]
\startformula
\alpha(x)\equiv\log\left[\frac{-xS'(x)}{S(x)}\right] > 0
\stopformula

使用这些作为替换，函数方程 (\in[2-45]) 变为

\placeformula[2-52]
\startformula
J(q + \alpha) - J(q) = \log\left[\frac{x}{S(x)}\right] + \log(1 - \text{exp}\{-q\}) + O(\text{exp}\{-2q\})
\stopformula

当 $q\rightarrow\infty$ 时，上式的后两项以指数的速度趋向于 0，因此 $J(q)$ 必定是渐近线性的，其斜率

\placeformula[2-53]
\startformula
b = \alpha^{-1}\log\left[\frac{x}{S(x)}\right]
\stopformula

为正值。

